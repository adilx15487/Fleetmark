import{c as B,n as q,u as O,r as m,w as j,j as e,k as f,t as o,o as F,P as v,B as N,p as L}from"./index-4uhfdJ5g.js";import{M as z}from"./Modal-CMHHpTEA.js";import{S as y}from"./save-DaVhGGVH.js";import{T as _}from"./trash-2-C96ABaz9.js";import{P as w}from"./plus-DSQApVbI.js";import{T as I}from"./timer-BYjdVWNH.js";import{C as W}from"./circle-check-B_HmI6gg.js";import{P as Y}from"./play-CNoOPN26.js";import{C as G}from"./calendar-Drz6fN4U.js";/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],U=B("sun",Q),X=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Z=[15,30,45,60,90,120],de=()=>{const{config:a,updateOperatingHours:p,addStoppedPeriod:S,removeStoppedPeriod:T,updateStoppedPeriod:J,setFrequency:k,generatedSlots:i}=q(),{toast:u}=O(),[r,n]=m.useState({startTime:"",endTime:"",reason:""}),[C,h]=m.useState(!1),[R,x]=m.useState(!1),[l,d]=m.useState({route:"",bus:"",day:"Monday",startTime:"",endTime:""}),A=s=>{s.preventDefault(),console.log("Add schedule slot:",l),x(!1),d({route:"",bus:"",day:"Monday",startTime:"",endTime:""})},P=()=>{u("Operating hours saved! ✅")},H=()=>{!r.startTime||!r.endTime||(S(r),n({startTime:"",endTime:"",reason:""}),h(!1),u("Stopped period added"))},M=()=>{u("Trip frequency saved! ✅")},D=j.reduce((s,t)=>s+t.slots.length,0),E=i.filter(s=>s.status==="active"),$=i.filter(s=>s.status==="stopped");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary-900",children:"Schedule Management"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Configure operating hours, breaks, and trip frequency for ",a.organizationName]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-50 flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Operating Hours"}),e.jsx("p",{className:"text-[11px] text-slate-400",children:a.organizationName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Start Time"}),e.jsx("input",{type:"time",value:a.operatingHours.startTime,onChange:s=>p({startTime:s.target.value}),className:"w-full px-3 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"}),e.jsx("span",{className:"text-[10px] text-slate-400 mt-1 block",children:o(a.operatingHours.startTime)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"End Time"}),e.jsx("input",{type:"time",value:a.operatingHours.endTime,onChange:s=>p({endTime:s.target.value}),className:"w-full px-3 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"}),e.jsx("span",{className:"text-[10px] text-slate-400 mt-1 block",children:o(a.operatingHours.endTime)})]})]}),a.operatingHours.overnight&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-indigo-50 border border-indigo-200",children:[e.jsx(F,{className:"w-4 h-4 text-indigo-500"}),e.jsx("span",{className:"text-xs font-medium text-indigo-700",children:"Runs overnight"})]}),!a.operatingHours.overnight&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-50 border border-amber-200",children:[e.jsx(U,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-xs font-medium text-amber-700",children:"Daytime service"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-2",children:"Active Days"}),e.jsx("div",{className:"flex gap-1.5",children:X.map((s,t)=>e.jsx("button",{type:"button",onClick:()=>{const c=[...a.operatingHours.activeDays];c[t]=!c[t],p({activeDays:c})},className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${a.operatingHours.activeDays[t]?"bg-primary-600 text-white shadow-sm":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:s},s))})]}),e.jsxs("button",{onClick:P,className:"w-full flex items-center justify-center gap-2 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:[e.jsx(y,{className:"w-4 h-4"}),"Save Hours"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-50 flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Stopped Periods"}),e.jsxs("p",{className:"text-[11px] text-slate-400",children:[a.stoppedPeriods.length," break",a.stoppedPeriods.length!==1?"s":""," configured"]})]})]})}),e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[a.stoppedPeriods.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-red-50/50 border border-red-100 group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-semibold text-red-700",children:[o(s.startTime)," → ",o(s.endTime)]}),s.reason&&e.jsx("p",{className:"text-[11px] text-red-400 truncate",children:s.reason})]}),e.jsx("button",{onClick:()=>T(s.id),className:"p-1.5 rounded-lg text-red-300 hover:text-red-600 hover:bg-red-100 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(_,{className:"w-4 h-4"})})]},s.id)),a.stoppedPeriods.length===0&&e.jsx("p",{className:"text-xs text-slate-300 text-center py-4",children:"No break periods configured"})]}),C?e.jsxs("div",{className:"space-y-3 p-3 rounded-xl bg-slate-50 border border-slate-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-slate-500 mb-1",children:"Start"}),e.jsx("input",{type:"time",value:r.startTime,onChange:s=>n({...r,startTime:s.target.value}),className:"w-full px-2.5 py-2 rounded-lg border border-slate-200 text-xs focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-medium text-slate-500 mb-1",children:"End"}),e.jsx("input",{type:"time",value:r.endTime,onChange:s=>n({...r,endTime:s.target.value}),className:"w-full px-2.5 py-2 rounded-lg border border-slate-200 text-xs focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none"})]})]}),e.jsx("input",{type:"text",placeholder:"Reason (optional)",value:r.reason,onChange:s=>n({...r,reason:s.target.value}),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-xs focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none placeholder:text-slate-300"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:H,disabled:!r.startTime||!r.endTime,className:"flex-1 py-2 rounded-lg bg-red-500 text-white text-xs font-semibold hover:bg-red-600 transition-colors disabled:opacity-40",children:"Add Break"}),e.jsx("button",{onClick:()=>{h(!1),n({startTime:"",endTime:"",reason:""})},className:"px-3 py-2 rounded-lg border border-slate-200 text-xs font-medium text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-2 py-2.5 rounded-xl border-2 border-dashed border-slate-200 text-sm font-medium text-slate-400 hover:border-red-300 hover:text-red-500 transition-colors",children:[e.jsx(w,{className:"w-4 h-4"}),"Add Stopped Period"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Trip Frequency"}),e.jsx("p",{className:"text-[11px] text-slate-400",children:"How often buses depart"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-2",children:"Depart every"}),e.jsx("select",{value:a.frequencyMinutes,onChange:s=>k(Number(s.target.value)),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all cursor-pointer",children:Z.map(s=>e.jsxs("option",{value:s,children:["Every ",s," minutes",s>=60?` (${s/60}h)`:""]},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl bg-emerald-50 p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-emerald-700",children:E.length}),e.jsx("p",{className:"text-[10px] text-emerald-500 font-medium",children:"Active Slots"})]}),e.jsxs("div",{className:"rounded-xl bg-red-50 p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-red-600",children:$.length}),e.jsx("p",{className:"text-[10px] text-red-400 font-medium",children:"Stopped Slots"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-2",children:"Assigned Buses"}),e.jsx("div",{className:"space-y-1.5",children:a.buses.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-50 border border-slate-100",children:[e.jsx(N,{className:"w-3.5 h-3.5 text-primary-500"}),e.jsx("span",{className:"text-xs font-medium text-slate-700",children:s.name}),e.jsxs("span",{className:"ml-auto text-[10px] text-slate-400",children:[s.capacity," seats"]})]},t))})]}),e.jsxs("button",{onClick:M,className:"w-full flex items-center justify-center gap-2 py-2.5 rounded-xl bg-emerald-500 text-white text-sm font-semibold hover:bg-emerald-600 shadow-lg shadow-emerald-500/20 transition-all active:scale-[0.98]",children:[e.jsx(y,{className:"w-4 h-4"}),"Save Frequency"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Generated Time Slots Preview"}),e.jsxs("p",{className:"text-[11px] text-slate-400 mt-0.5",children:[o(a.operatingHours.startTime)," → ",o(a.operatingHours.endTime),a.operatingHours.overnight?" (overnight)":""," · Every ",a.frequencyMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-500"}),e.jsx("span",{className:"text-slate-500",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-400"}),e.jsx("span",{className:"text-slate-500",children:"Stopped"})]})]})]}),e.jsxs("div",{className:"overflow-x-auto pb-2",children:[e.jsx("div",{className:"flex items-end gap-1 min-w-max",children:i.map((s,t)=>e.jsxs("div",{className:"flex flex-col items-center gap-1.5 min-w-[56px]",children:[s.status==="active"?e.jsx(W,{className:"w-4 h-4 text-emerald-500"}):e.jsx(L,{className:"w-4 h-4 text-red-400"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${s.status==="active"?"bg-emerald-500 border-emerald-600":"bg-red-400 border-red-500"}`}),e.jsx("span",{className:`text-[10px] font-semibold whitespace-nowrap ${s.status==="active"?"text-slate-700":"text-red-400"}`,children:s.label}),e.jsx("span",{className:`text-[9px] whitespace-nowrap ${s.status==="active"?"text-emerald-500":"text-red-300"}`,children:s.status==="active"?`${s.availableSeats}/${s.totalSeats}`:s.reason||"Break"})]},t))}),e.jsxs("div",{className:"relative mt-[-34px] mx-[28px]",children:[e.jsx("div",{className:"h-0.5 bg-slate-200 w-full"}),e.jsx("div",{className:"absolute inset-0 flex",children:i.map((s,t)=>{var b,g;if(t===i.length-1)return null;const c=`${100/(i.length-1)}%`;return e.jsx("div",{className:`h-0.5 ${s.status==="active"&&((b=i[t+1])==null?void 0:b.status)==="active"?"bg-emerald-400":s.status==="stopped"||((g=i[t+1])==null?void 0:g.status)==="stopped"?"bg-red-300":"bg-slate-200"}`,style:{width:c}},t)})})]})]}),e.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:i.map((s,t)=>e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2.5 rounded-xl border text-sm transition-all ${s.status==="active"?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-red-50 border-red-200 text-red-500"}`,children:[s.status==="active"?e.jsx(Y,{className:"w-3.5 h-3.5 shrink-0"}):e.jsx(v,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"font-semibold text-xs",children:s.label})]},t))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-primary-900",children:"Weekly Schedule"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[D," active time slots this week"]})]}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:[e.jsx(w,{className:"w-4 h-4"}),"Add Time Slot"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:j.map(s=>e.jsxs("div",{className:`bg-white rounded-2xl border border-slate-200 overflow-hidden transition-all hover:shadow-lg hover:shadow-primary-100/30 ${s.slots.length===0?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100 bg-slate-50/60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-primary-500"}),e.jsx("span",{className:"text-sm font-bold text-primary-900",children:s.day})]}),e.jsx("span",{className:"text-xs text-slate-400 font-medium",children:s.date})]}),e.jsx("div",{className:"p-3 space-y-2 min-h-[120px]",children:s.slots.length===0?e.jsx("div",{className:"flex items-center justify-center h-[100px] text-xs text-slate-300 font-medium",children:"No trips scheduled"}):s.slots.map(t=>e.jsxs("div",{className:"relative pl-3 py-2.5 pr-3 rounded-xl bg-slate-50 border border-slate-100 hover:border-primary-200 transition-colors group",children:[e.jsx("div",{className:`absolute left-0 top-2 bottom-2 w-1 rounded-full ${t.color}`}),e.jsxs("div",{className:"ml-2",children:[e.jsx("p",{className:"text-xs font-bold text-primary-900",children:t.route}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[e.jsx(N,{className:"w-3 h-3"}),t.bus]}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[e.jsx(f,{className:"w-3 h-3"}),t.time]})]})]})]},t.id))})]},s.day))}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900 mb-3",children:"Route Legend"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:[{route:"Route A",color:"bg-primary-500"},{route:"Route B",color:"bg-accent-500"},{route:"Route C",color:"bg-emerald-500"},{route:"Route D",color:"bg-amber-500"},{route:"Route E",color:"bg-rose-500"}].map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.color}`}),e.jsx("span",{className:"text-xs font-medium text-slate-600",children:s.route})]},s.route))})]}),e.jsx(z,{isOpen:R,onClose:()=>x(!1),title:"Add Time Slot",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Route"}),e.jsxs("select",{value:l.route,onChange:s=>d({...l,route:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all cursor-pointer",children:[e.jsx("option",{value:"",children:"Select a route"}),e.jsx("option",{value:"Route A",children:"Route A — Campus Express"}),e.jsx("option",{value:"Route B",children:"Route B — Downtown Loop"}),e.jsx("option",{value:"Route C",children:"Route C — Industrial Zone"}),e.jsx("option",{value:"Route D",children:"Route D — Airport Shuttle"}),e.jsx("option",{value:"Route E",children:"Route E — Medical Campus"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Bus"}),e.jsx("input",{type:"text",placeholder:"e.g. Bus 07",value:l.bus,onChange:s=>d({...l,bus:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Day"}),e.jsx("select",{value:l.day,onChange:s=>d({...l,day:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all cursor-pointer",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Start Time"}),e.jsx("input",{type:"time",value:l.startTime,onChange:s=>d({...l,startTime:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"End Time"}),e.jsx("input",{type:"time",value:l.endTime,onChange:s=>d({...l,endTime:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-5 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all",children:"Add Slot"})]})]})})]})};export{de as default};
