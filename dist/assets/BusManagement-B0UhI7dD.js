import{c as A,u as S,r as n,f as b,j as e,g as B}from"./index-4uhfdJ5g.js";import{M as R}from"./Modal-CMHHpTEA.js";import{u as L,b as E,E as M}from"./ErrorState-DbHSWhVP.js";import{P as D}from"./plus-DSQApVbI.js";import{T as F}from"./trash-2-C96ABaz9.js";/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],q=A("pencil",T),I={Active:"bg-emerald-50 text-emerald-600 border-emerald-200",Inactive:"bg-slate-100 text-slate-500 border-slate-200",Maintenance:"bg-amber-50 text-amber-600 border-amber-200"},H=()=>{const{isLoading:y,isError:g,retry:f}=L(),{toast:j}=S(),[i,N]=n.useState(""),[v,o]=n.useState(!1),[a,m]=n.useState({name:"",plateNumber:"",capacity:"",assignedRoute:"",driver:"",status:"Active"}),[u,l]=n.useState({}),[x,c]=n.useState({}),h=b.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.id.toLowerCase().includes(i.toLowerCase())||t.driver.toLowerCase().includes(i.toLowerCase())),p=(t,s)=>{switch(t){case"name":return s.trim()?"":"Bus name is required";case"plateNumber":return s.trim()?"":"Plate number is required";case"capacity":return s.trim()?Number(s)<=0?"Capacity must be greater than 0":"":"Capacity is required";case"assignedRoute":return s.trim()?"":"Route is required";case"driver":return s.trim()?"":"Driver is required";default:return""}},w=t=>{c(s=>({...s,[t]:!0})),l(s=>({...s,[t]:p(t,a[t])}))},C=(t,s)=>{m({...a,[t]:s}),x[t]&&l(d=>({...d,[t]:p(t,s)}))},k=t=>{t.preventDefault();const s={},d=["name","plateNumber","capacity","assignedRoute","driver"];d.forEach(r=>{s[r]=p(r,a[r])}),l(s),c(Object.fromEntries(d.map(r=>[r,!0]))),!Object.values(s).some(r=>r)&&(console.log("Add bus:",a),j("Bus added successfully!"),o(!1),m({name:"",plateNumber:"",capacity:"",assignedRoute:"",driver:"",status:"Active"}),l({}),c({}))};return y?e.jsx(E,{rows:6,cols:7}):g?e.jsx(M,{onRetry:f}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary-900",children:"All Buses"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[b.length," buses registered"]})]}),e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:[e.jsx(D,{className:"w-4 h-4"}),"Add New Bus"]})]}),e.jsxs("div",{className:"flex items-center bg-white border border-slate-200 rounded-xl px-4 py-2.5 max-w-sm focus-within:ring-2 focus-within:ring-primary-500/20 focus-within:border-primary-400 transition-all",children:[e.jsx(B,{className:"w-4 h-4 text-slate-400 mr-3"}),e.jsx("input",{type:"text",placeholder:"Search buses...",value:i,onChange:t=>N(t.target.value),className:"bg-transparent text-sm outline-none w-full placeholder:text-slate-400"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50/80",children:["Bus ID","Name","Capacity","Assigned Route","Driver","Status","Actions"].map(t=>e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:t},t))})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"px-5 py-3.5 font-mono text-xs text-primary-600 font-semibold",children:t.id}),e.jsx("td",{className:"px-5 py-3.5 font-medium text-primary-900 whitespace-nowrap",children:t.name}),e.jsxs("td",{className:"px-5 py-3.5 text-slate-500",children:[t.capacity," seats"]}),e.jsx("td",{className:"px-5 py-3.5 text-slate-500 whitespace-nowrap",children:t.assignedRoute}),e.jsx("td",{className:"px-5 py-3.5 text-slate-500 whitespace-nowrap",children:t.driver}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsx("span",{className:`inline-block px-2.5 py-1 rounded-lg text-xs font-semibold border ${I[t.status]}`,children:t.status})}),e.jsx("td",{className:"px-5 py-3.5",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-primary-600 hover:bg-primary-50 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-danger-500 hover:bg-red-50 transition-colors",children:e.jsx(F,{className:"w-4 h-4"})})]})})]},t.id))})]})}),h.length===0&&e.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"No buses found."})]}),e.jsx(R,{isOpen:v,onClose:()=>{o(!1),l({}),c({})},title:"Add New Bus",children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[[{label:"Bus Name",key:"name",type:"text",placeholder:"e.g. Campus Cruiser"},{label:"Plate Number",key:"plateNumber",type:"text",placeholder:"e.g. A-1234-BC"},{label:"Capacity",key:"capacity",type:"number",placeholder:"e.g. 48"},{label:"Assigned Route",key:"assignedRoute",type:"text",placeholder:"e.g. Route A"},{label:"Assigned Driver",key:"driver",type:"text",placeholder:"e.g. Hassan Moukhtari"}].map(t=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:t.label}),e.jsx("input",{type:t.type,placeholder:t.placeholder,value:a[t.key],onChange:s=>C(t.key,s.target.value),onBlur:()=>w(t.key),className:`w-full px-4 py-2.5 rounded-xl border text-sm focus:ring-2 outline-none transition-all placeholder:text-slate-300 ${x[t.key]&&u[t.key]?"border-red-300 focus:ring-red-500/20 focus:border-red-500":"border-slate-200 focus:ring-primary-500/20 focus:border-primary-500"}`}),x[t.key]&&u[t.key]&&e.jsx("p",{className:"mt-1 text-xs text-red-500 font-medium",children:u[t.key]})]},t.key)),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>m({...a,status:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-5 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all",children:"Add Bus"})]})]})})]})};export{H as default};
