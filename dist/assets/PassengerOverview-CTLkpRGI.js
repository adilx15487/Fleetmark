import{E as R,F as T,G as h,H as m,p as $,k as p,j as e,B as C,L as a,I as g,J as L,K as E}from"./index-BOVp0MNk.js";import{u as G,S as b,c as j,E as A}from"./ErrorState-B3sflJ8u.js";import{T as B}from"./trending-up-D596pNn6.js";import{C as H}from"./check-BlTPTqQ1.js";const v={reservation:{color:"text-emerald-500",bg:"bg-emerald-50"},route_change:{color:"text-amber-500",bg:"bg-amber-50"},delay:{color:"text-orange-500",bg:"bg-orange-50"},cancellation:{color:"text-red-500",bg:"bg-red-50"},system:{color:"text-sky-500",bg:"bg-sky-50"}},I=()=>{const t=new Date().getHours();return t<12?"Good morning":t<17?"Good afternoon":"Good evening"},U=()=>{const{user:t}=R(),{isLoading:N,isError:u,retry:f}=G(),{isOnboarded:n,transport:c,tonightReservations:w,reservationsUsed:l,maxReservations:i,getBusInfo:y}=T(),k=E.slice(0,3),o=w.filter(s=>s.status==="Confirmed"),d=o.length>0?o[0]:null,x=y(),S=[{...h.totalRides,icon:B,color:"text-primary-600",bg:"bg-primary-50"},{value:`${l}/${i}`,label:"Tonight",icon:m,color:"text-emerald-500",bg:"bg-emerald-50"},{...h.cancelledRides,icon:$,color:"text-red-500",bg:"bg-red-50"},{value:(c==null?void 0:c.homeStop)||"â€”",label:"Home Stop",icon:p,color:"text-pink-500",bg:"bg-pink-50"}];return N?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-8",children:e.jsx(b,{})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4},(s,r)=>e.jsx(b,{},r))}),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-6",children:[e.jsx(j,{className:"lg:col-span-3",items:3}),e.jsx(j,{className:"lg:col-span-2",items:3})]})]}):u?e.jsx(A,{onRetry:f}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary-700 via-primary-800 to-primary-900 rounded-2xl p-6 sm:p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-accent-400/10 rounded-full -translate-y-1/3 translate-x-1/3"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-accent-400/5 rounded-full translate-y-1/2 -translate-x-1/4"}),e.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:[I(),", ",(t==null?void 0:t.name.split(" ")[0])||"there"," ðŸ‘‹"]}),e.jsx("p",{className:"text-primary-200 mt-1 text-sm sm:text-base",children:n?"Here's your shuttle status for tonight.":"Set up your transport to start reserving trips."})]}),n?d?e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-5 min-w-0 lg:min-w-[320px]",children:[e.jsx("p",{className:"text-xs font-semibold text-accent-300 uppercase tracking-wider mb-2",children:"Next Trip Tonight"}),e.jsxs("h3",{className:"text-xl font-bold",children:[d.slotLabel," ðŸšŒ"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-200",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:(x==null?void 0:x.busNumber)||"â€”"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-primary-200",children:[e.jsx(p,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:d.homeStop})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx(a,{to:"/passenger/reservations",className:"text-xs font-semibold text-accent-300 hover:text-accent-200 transition-colors",children:"View all â†’"}),e.jsx(a,{to:"/passenger/reserve",className:"text-xs font-semibold text-primary-300 hover:text-white transition-colors",children:"Cancel â†’"})]})]}):e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-5 min-w-0 lg:min-w-[320px]",children:[e.jsx("p",{className:"text-xs font-semibold text-amber-300 uppercase tracking-wider mb-2",children:"Tonight"}),e.jsx("p",{className:"text-sm text-primary-200",children:"You haven't reserved a trip tonight yet."}),e.jsxs(a,{to:"/passenger/reserve",className:"inline-flex items-center gap-2 mt-3 px-5 py-2.5 rounded-xl bg-accent-400 text-primary-900 text-sm font-bold hover:bg-accent-300 transition-colors",children:[e.jsx(m,{className:"w-4 h-4"}),"Reserve Now"]})]}):e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-5 min-w-0 lg:min-w-[320px]",children:[e.jsx("p",{className:"text-sm text-primary-200",children:"Complete your setup to start using the shuttle."}),e.jsxs(a,{to:"/passenger/reserve",className:"inline-flex items-center gap-2 mt-3 px-5 py-2.5 rounded-xl bg-accent-400 text-primary-900 text-sm font-bold hover:bg-accent-300 transition-colors",children:["Get Started",e.jsx(g,{className:"w-4 h-4"})]})]})]}),n&&e.jsx("div",{className:"relative z-10 mt-6",children:e.jsxs(a,{to:"/passenger/reserve",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-accent-400 text-primary-900 text-sm font-bold hover:bg-accent-300 transition-colors shadow-lg shadow-accent-400/25",children:[e.jsx(m,{className:"w-4 h-4"}),"Reserve a Seat",e.jsx(g,{className:"w-4 h-4"})]})})]}),n&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-primary-900",children:[l," / ",i," trips reserved tonight"]}),e.jsx("span",{className:"text-xs text-slate-400",children:"Resets at 10:00 PM"})]}),e.jsx("div",{className:"w-full h-3 rounded-full bg-slate-100",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${l>=i?"bg-red-500":l>=i-1?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${l/i*100}%`}})}),o.length>0&&e.jsx("div",{className:"mt-3 space-y-1.5",children:o.map(s=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(H,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"font-semibold text-primary-900",children:s.slotLabel}),e.jsx("span",{className:"text-slate-300",children:"â†’"}),e.jsx("span",{children:s.homeStop})]},s.id))})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:S.map(s=>{const r=s.icon;return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 hover:shadow-lg hover:shadow-primary-100/30 transition-shadow",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${s.bg} flex items-center justify-center mb-3`,children:e.jsx(r,{className:`w-5 h-5 ${s.color}`})}),e.jsx("p",{className:"text-2xl font-bold text-primary-900 truncate",children:s.value}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:s.label})]},s.label)})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Recent Notifications"}),e.jsx(a,{to:"/passenger/notifications",className:"text-xs font-semibold text-accent-500 hover:text-accent-600 transition-colors",children:"View All â†’"})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:k.map(s=>{const r=v[s.type]||v.system;return e.jsxs("div",{className:"flex items-start gap-3 px-5 py-4 hover:bg-slate-50/50 transition-colors",children:[e.jsx("div",{className:`w-9 h-9 rounded-xl ${r.bg} flex items-center justify-center shrink-0 mt-0.5`,children:e.jsx(L,{className:`w-4 h-4 ${r.color}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-primary-900 truncate",children:s.title}),!s.read&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-accent-500 shrink-0"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:s.message}),e.jsx("p",{className:"text-[11px] text-slate-300 mt-1",children:s.time})]})]},s.id)})})]})]})};export{U as default};
