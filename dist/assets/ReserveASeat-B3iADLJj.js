import{c as W,u as z,n as G,r as o,O as J,Q as v,j as e,k as y,t as P,g as K,I as X,i as E,U as Z,V as H,P as ee,T as se,B as L,H as te,W as ae}from"./index-4uhfdJ5g.js";import{P as re}from"./play-CNoOPN26.js";/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M=W("check",le),ne=["Choose Route","Choose Seat & Time","Confirm"],ce=()=>{const{toast:_}=z(),{config:u,generatedSlots:w,serviceStatus:t}=G(),[h,p]=o.useState(1),[b,I]=o.useState(""),[F,S]=o.useState(null),[k]=o.useState(()=>J()),[x,C]=o.useState(null),[r,j]=o.useState(null),[f,R]=o.useState(""),[g,A]=o.useState(!1),[B,m]=o.useState(""),d=v.find(s=>s.id===F),D=o.useMemo(()=>b?v.filter(s=>s.status==="Active"&&s.name.toLowerCase().includes(b.toLowerCase())):v.filter(s=>s.status==="Active"),[b]),O=s=>{S(s);const l=w.find(a=>a.status==="active");j(l||null),p(2)},Y=s=>{const l=k.find(a=>a.id===s);l&&l.status==="available"&&(C(s),m(""))},U=()=>{if(!x&&!f&&!r){m("Please select a seat, time slot, and date to continue.");return}if(!r){m("Please select a departure time slot.");return}if(!x){m("Please select a seat from the map.");return}if(!f){m("Please pick a date for your trip.");return}m(""),p(3)},q=()=>{A(!0),_("Seat confirmed! ðŸŽ‰")},Q=()=>{p(1),S(null),C(null),j(null),R(""),A(!1)};return t.state,e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-2xl px-5 py-4 border ${t.state==="running"?"bg-emerald-50 border-emerald-200":t.state==="break"?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:`w-5 h-5 shrink-0 ${t.state==="running"?"text-emerald-600":t.state==="break"?"text-amber-600":"text-red-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:["Operating hours: ",P(u.operatingHours.startTime)," â€” ",P(u.operatingHours.endTime),u.operatingHours.overnight&&e.jsx("span",{className:"text-slate-400 ml-1",children:"(overnight)"})]}),t.state==="running"&&e.jsxs("p",{className:"text-xs text-emerald-600",children:["Buses are running â€” Next departure at ",t.nextDeparture]}),t.state==="break"&&e.jsxs("p",{className:"text-xs text-amber-600",children:["Break time â€” Buses resume at ",t.resumesAt]}),t.state==="ended"&&e.jsxs("p",{className:"text-xs text-red-600",children:["Service ended â€” Resumes at ",t.resumesAt]})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold ${t.state==="running"?"bg-emerald-100 text-emerald-700":t.state==="break"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t.state==="running"?"bg-emerald-500 animate-pulse":t.state==="break"?"bg-amber-500":"bg-red-500"}`}),t.state==="running"?"Running":t.state==="break"?"Break":"Offline"]})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:e.jsx("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:ne.map((s,l)=>{const a=l+1,i=h===a,c=h>a||g;return e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${c?"bg-emerald-500 text-white":i?"bg-primary-600 text-white shadow-lg shadow-primary-600/20":"bg-slate-100 text-slate-400"}`,children:c?e.jsx(M,{className:"w-4 h-4"}):a}),e.jsx("span",{className:`text-sm font-medium hidden sm:block ${i?"text-primary-900":"text-slate-400"}`,children:s})]}),l<2&&e.jsx("div",{className:`flex-1 h-px mx-2 ${h>a?"bg-emerald-300":"bg-slate-200"}`})]},s)})})}),h===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(K,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search routesâ€¦",value:b,onChange:s=>I(s.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300"})]}),e.jsx("div",{className:"grid sm:grid-cols-2 xl:grid-cols-3 gap-4",children:D.map(s=>e.jsxs("button",{onClick:()=>O(s.id),className:"bg-white rounded-2xl border border-slate-200 p-5 text-left hover:shadow-lg hover:shadow-primary-100/30 hover:border-primary-300 transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900 group-hover:text-primary-700",children:s.name}),e.jsx(X,{className:"w-4 h-4 text-slate-300 group-hover:text-primary-500 transition-colors shrink-0 mt-0.5"})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-slate-400 mb-3 flex-wrap",children:s.stops.map((l,a)=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3 text-primary-400"}),e.jsx("span",{children:l}),a<s.stops.length-1&&e.jsx("span",{className:"text-slate-300 mx-0.5",children:"â†’"})]},l))}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 text-slate-400",children:[e.jsx(y,{className:"w-3 h-3"}),e.jsxs("span",{children:["Every ",u.frequencyMinutes," min"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:s.availableSeats}),e.jsxs("span",{className:"text-slate-300",children:["/ ",s.totalSeats]})]})]})]},s.id))}),D.length===0&&e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center text-sm text-slate-400",children:"No routes found matching your search."})]}),h===2&&d&&e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>p(1),className:"flex items-center gap-1.5 text-sm font-medium text-slate-500 hover:text-primary-600 transition-colors",children:[e.jsx(H,{className:"w-4 h-4"}),"Back"]}),e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:d.name})]}),e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3",children:"Select Departure Time"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 max-h-48 overflow-y-auto",children:w.map((s,l)=>{const a=(r==null?void 0:r.time)===s.time,i=s.status==="stopped",c=s.status==="active"&&s.availableSeats===0,N=i||c;return e.jsxs("button",{type:"button",disabled:N,onClick:()=>{j(s),m("")},className:`relative flex flex-col items-center gap-1 px-3 py-3 rounded-xl border text-sm transition-all ${a?"bg-primary-50 border-primary-400 ring-2 ring-primary-500/20 shadow-md":i?"bg-slate-50 border-slate-200 text-slate-400 cursor-not-allowed opacity-60":c?"bg-red-50 border-red-200 text-red-400 cursor-not-allowed":"bg-white border-slate-200 hover:border-primary-300 hover:shadow-sm cursor-pointer"}`,children:[i?e.jsx(ee,{className:"w-4 h-4 text-slate-300"}):c?e.jsx(se,{className:"w-4 h-4 text-red-400"}):e.jsx(re,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:`font-bold text-xs ${a?"text-primary-900":i?"text-slate-400":"text-slate-700"}`,children:s.label}),i?e.jsx("span",{className:"text-[10px] text-slate-300",children:"Break"}):e.jsx("span",{className:`text-[10px] ${c?"text-red-400":"text-emerald-500"}`,children:c?"Full":`${s.availableSeats} seats`})]},l)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-5 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-md bg-emerald-100 border border-emerald-300"}),e.jsx("span",{className:"text-slate-500",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-md bg-red-100 border border-red-300"}),e.jsx("span",{className:"text-slate-500",children:"Reserved"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-md bg-primary-500 border border-primary-600"}),e.jsx("span",{className:"text-slate-500",children:"Your Pick"})]})]}),e.jsx("div",{className:"flex justify-center mb-3",children:e.jsxs("div",{className:"px-4 py-1.5 rounded-t-xl bg-slate-100 border border-b-0 border-slate-200 text-xs font-semibold text-slate-400 uppercase tracking-wider flex items-center gap-1.5",children:[e.jsx(L,{className:"w-3.5 h-3.5"})," Front"]})}),e.jsx("div",{className:"border border-slate-200 rounded-2xl p-4 max-w-xs mx-auto",children:e.jsx("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-y-2",children:Array.from({length:12},(s,l)=>{const a=l+1,i=k.filter(n=>n.row===a),c=i.filter(n=>n.col==="A"||n.col==="B"),N=i.filter(n=>n.col==="C"||n.col==="D"),$=n=>{const V=x===n.id,T=n.status==="reserved";return e.jsx("button",{disabled:T,onClick:()=>Y(n.id),className:`w-10 h-10 rounded-lg text-xs font-bold transition-all ${V?"bg-primary-500 text-white border-2 border-primary-600 shadow-md shadow-primary-500/30 scale-105":T?"bg-red-100 text-red-400 border border-red-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-400 hover:scale-105"}`,children:n.id},n.id)};return e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"flex gap-1.5 justify-end",children:c.map($)}),e.jsx("div",{className:"w-6"}),e.jsx("div",{className:"flex gap-1.5",children:N.map($)})]},a)})})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-primary-900",children:"Trip Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Departure Time"}),e.jsx("div",{className:`px-4 py-2.5 rounded-xl border text-sm font-medium ${r?"border-primary-300 bg-primary-50 text-primary-800":"border-slate-200 bg-slate-50 text-slate-400"}`,children:r?r.label:"Select a time slot above"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Date"}),e.jsx("input",{type:"date",value:f,onChange:s=>{R(s.target.value),m("")},className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsx("h4",{className:"text-sm font-bold text-primary-900 mb-3",children:"Your Selection"}),x?e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Seat"}),e.jsx("span",{className:"font-bold text-primary-900",children:x})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Route"}),e.jsx("span",{className:"font-medium text-primary-900",children:d.name.split(" â€” ")[0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Bus"}),e.jsx("span",{className:"font-medium text-primary-900",children:d.assignedBus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Time"}),e.jsx("span",{className:"font-medium text-primary-900",children:(r==null?void 0:r.label)||"â€”"})]})]}):e.jsx("p",{className:"text-sm text-slate-300",children:"Select a seat from the map."}),e.jsx("button",{onClick:U,className:"w-full mt-4 px-5 py-3 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Continue to Confirm"}),B&&e.jsx("p",{className:"mt-2 text-xs text-red-500 font-medium text-center",children:B})]})]})]}),h===3&&d&&!g&&e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[e.jsxs("button",{onClick:()=>p(2),className:"flex items-center gap-1.5 text-sm font-medium text-slate-500 hover:text-primary-600 transition-colors mb-4",children:[e.jsx(H,{className:"w-4 h-4"}),"Back to seat map"]}),e.jsx("h3",{className:"text-lg font-bold text-primary-900 mb-5",children:"Reservation Summary"}),e.jsx("div",{className:"space-y-3 text-sm",children:[{label:"Route",value:d.name,icon:E},{label:"Bus",value:d.assignedBus,icon:L},{label:"Seat",value:x,icon:te},{label:"Date",value:f,icon:ae},{label:"Departure",value:(r==null?void 0:r.label)||"â€”",icon:y}].map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[e.jsx(s.icon,{className:"w-4 h-4 text-primary-500 shrink-0"}),e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("span",{className:"text-slate-400",children:s.label}),e.jsx("span",{className:"font-semibold text-primary-900",children:s.value})]})]},s.label))}),e.jsx("button",{onClick:q,className:"w-full mt-6 px-5 py-3.5 rounded-xl bg-emerald-500 text-white text-sm font-bold hover:bg-emerald-600 shadow-lg shadow-emerald-500/20 transition-all active:scale-[0.98]",children:"Confirm Reservation"})]})}),g&&e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"w-8 h-8 text-emerald-500"})}),e.jsx("h3",{className:"text-xl font-bold text-primary-900 mb-2",children:"Seat Confirmed! ðŸŽ‰"}),e.jsxs("p",{className:"text-sm text-slate-400 mb-6",children:["Your reservation for seat ",e.jsx("span",{className:"font-bold text-primary-900",children:x})," on"," ",e.jsx("span",{className:"font-bold text-primary-900",children:d==null?void 0:d.name})," has been confirmed."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:Q,className:"px-6 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 transition-all",children:"Reserve Another"}),e.jsx("button",{className:"px-6 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors",children:"Add to Calendar"})]})]})})]})};export{ce as default};
