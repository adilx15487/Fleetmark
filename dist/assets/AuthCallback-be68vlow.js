import{a9 as x,Y as d,ab as h,E as u,r as c,j as e,a4 as g,p as b}from"./index-RZfUFfFO.js";import{C as p}from"./circle-check-BZgzrpog.js";const N=()=>{x("Authenticating — Fleetmark");const t=d(),[i]=h(),{loginWith42:l}=u(),[a,s]=c.useState("authenticating"),[m,n]=c.useState("");return c.useEffect(()=>{const o=i.get("code");(async()=>{if(!o){s("error"),n("No authorization code received from 42.");return}console.log("42 OAuth callback code:",o);const r=await l();r.result==="role-select"?(s("success"),setTimeout(()=>t("/auth/role-select"),800)):r.result==="dashboard"?(s("success"),setTimeout(()=>t(r.path),800)):(s("error"),n("Authentication failed. Please try again."))})()},[i,l,t]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-primary-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-primary-100/20 border border-slate-200 p-10 max-w-sm w-full text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"text-white text-2xl font-black tracking-tight",children:"42"})}),a==="authenticating"&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-8 h-8 text-primary-600 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-bold text-primary-900 mb-2",children:"Authenticating with 42"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Verifying your 42 Intra credentials…"})]}),a==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-10 h-10 text-emerald-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-bold text-primary-900 mb-2",children:"Authenticated!"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Redirecting you now…"})]}),a==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-10 h-10 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-bold text-primary-900 mb-2",children:"Authentication Failed"}),e.jsx("p",{className:"text-sm text-red-500 mb-6",children:m}),e.jsx("button",{onClick:()=>t("/"),className:"px-6 py-2.5 rounded-xl bg-primary-700 text-white text-sm font-semibold hover:bg-primary-800 transition-colors",children:"Back to Home"})]})]})})};export{N as default};
