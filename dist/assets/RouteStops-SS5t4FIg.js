import{r as d,b as u,j as e,T as y,k as N,C as g,B as v,a as w,P as k}from"./index-BOVp0MNk.js";import{M as S}from"./Modal-DrzfnMu2.js";import{P as C}from"./plus-CYxLcvGQ.js";import{C as M}from"./chevron-up-MJiWGIsq.js";const T={Active:"bg-emerald-50 text-emerald-600 border-emerald-200",Inactive:"bg-slate-100 text-slate-500 border-slate-200"},j=[{bg:"bg-primary-500/10",icon:"text-primary-600",dot:"bg-primary-500",dotMid:"bg-primary-300",line:"bg-primary-300",badge:"bg-primary-50 text-primary-700 border-primary-200",ring:"ring-primary-500/20"},{bg:"bg-sky-500/10",icon:"text-sky-600",dot:"bg-sky-500",dotMid:"bg-sky-300",line:"bg-sky-300",badge:"bg-sky-50 text-sky-700 border-sky-200",ring:"ring-sky-500/20"}],$=()=>{var p;const[h,c]=d.useState(((p=u[0])==null?void 0:p.id)??null),[m,x]=d.useState(!1),[r,l]=d.useState({name:"",stops:"",assignedBus:"",startTime:"",endTime:""}),b=s=>{s.preventDefault(),console.log("Add route:",r),x(!1),l({name:"",stops:"",assignedBus:"",startTime:"",endTime:""})},i=u.reduce((s,t)=>s+t.stops.length,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-2xl bg-amber-50 border border-amber-200",children:[e.jsx(y,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-amber-800",children:"Official Stops Only"}),e.jsx("p",{className:"text-xs text-amber-600 mt-0.5",children:"No pick-up or drop-off outside designated stop points. Stops are revised once per year by the administration."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary-900",children:"All Routes"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[u.length," routes · ",i," total stops"]})]}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:[e.jsx(C,{className:"w-4 h-4"}),"Add New Route"]})]}),e.jsx("div",{className:"space-y-4",children:u.map((s,t)=>{var o,f;const a=h===s.id,n=j[t%j.length];return e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-lg hover:shadow-primary-100/30 transition-all duration-200",children:[e.jsxs("button",{onClick:()=>c(a?null:s.id),className:"w-full flex items-center justify-between px-5 py-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${n.bg} flex items-center justify-center`,children:e.jsx(N,{className:`w-5 h-5 ${n.icon}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:[s.stops.length," stops · ",(o=s.stops[0])==null?void 0:o.name," → ",(f=s.stops[s.stops.length-1])==null?void 0:f.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`hidden sm:inline-block px-2.5 py-1 rounded-lg text-xs font-semibold border ${T[s.status]}`,children:s.status}),a?e.jsx(M,{className:"w-4 h-4 text-slate-400"}):e.jsx(g,{className:"w-4 h-4 text-slate-400"})]})]}),a&&e.jsxs("div",{className:"px-5 pb-5 border-t border-slate-100 pt-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[e.jsx(v,{className:"w-4 h-4 text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Assigned Bus"}),e.jsx("p",{className:"text-sm font-semibold text-primary-900",children:s.assignedBus})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[e.jsx(w,{className:"w-4 h-4 text-indigo-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Operating Hours"}),e.jsx("p",{className:"text-sm font-semibold text-primary-900",children:"10:00 PM → 6:00 AM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[e.jsx(k,{className:"w-4 h-4 text-amber-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Break Period"}),e.jsx("p",{className:"text-sm font-semibold text-primary-900",children:"2:00 AM → 3:00 AM"})]})]})]}),e.jsxs("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:["Stops Timeline — ",s.stops.length," stops"]}),e.jsx(A,{stops:s.stops,accent:n})]})]},s.id)})}),e.jsx(S,{isOpen:m,onClose:()=>x(!1),title:"Add New Route",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Route Name"}),e.jsx("input",{type:"text",placeholder:"e.g. Route F — Evening Express",value:r.name,onChange:s=>l({...r,name:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Stops (comma-separated)"}),e.jsx("textarea",{placeholder:"e.g. Main Gate, Library, Labs, Dorms",value:r.stops,onChange:s=>l({...r,stops:s.target.value}),rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Assigned Bus"}),e.jsx("input",{type:"text",placeholder:"e.g. Bus 07",value:r.assignedBus,onChange:s=>l({...r,assignedBus:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Start Time"}),e.jsx("input",{type:"time",value:r.startTime,onChange:s=>l({...r,startTime:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"End Time"}),e.jsx("input",{type:"time",value:r.endTime,onChange:s=>l({...r,endTime:s.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-5 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all",children:"Add Route"})]})]})})]})},A=({stops:h,accent:c})=>{const m=d.useRef(null),[x,r]=d.useState(!1),[l,b]=d.useState(!1),i=()=>{const t=m.current;t&&(r(t.scrollLeft>4),b(t.scrollLeft<t.scrollWidth-t.clientWidth-4))};d.useEffect(()=>{i();const t=m.current;return t==null||t.addEventListener("scroll",i),window.addEventListener("resize",i),()=>{t==null||t.removeEventListener("scroll",i),window.removeEventListener("resize",i)}},[]);const p=t=>{var a;(a=m.current)==null||a.scrollBy({left:t==="left"?-200:200,behavior:"smooth"})},s=t=>{const[a,n]=t.split(":").map(Number),o=a>=12?"PM":"AM";return`${a%12||12}:${String(n).padStart(2,"0")} ${o}`};return e.jsxs("div",{className:"relative group",children:[x&&e.jsx("button",{onClick:()=>p("left"),className:"absolute left-0 top-0 bottom-0 w-10 z-10 bg-gradient-to-r from-white to-transparent flex items-center justify-start pl-1 opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Scroll left",children:e.jsx(g,{className:"w-4 h-4 text-slate-400 -rotate-90"})}),l&&e.jsx("button",{onClick:()=>p("right"),className:"absolute right-0 top-0 bottom-0 w-10 z-10 bg-gradient-to-l from-white to-transparent flex items-center justify-end pr-1 opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Scroll right",children:e.jsx(g,{className:"w-4 h-4 text-slate-400 rotate-90"})}),e.jsx("div",{ref:m,className:"overflow-x-auto scrollbar-thin pb-2",style:{scrollbarWidth:"thin"},children:e.jsx("div",{className:"flex items-start gap-0 min-w-max px-2 pt-2",children:h.map((t,a)=>{const n=a===0,o=a===h.length-1;return e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:"flex flex-col items-center",style:{width:"100px"},children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm ${n?c.dot:o?"bg-emerald-500":c.dotMid}`,children:a+1}),e.jsx("p",{className:"text-[11px] font-medium text-primary-900 text-center mt-1.5 leading-tight px-1 max-w-[96px]",children:t.name}),e.jsx("p",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:s(t.arrivalTime)})]}),!o&&e.jsxs("div",{className:"flex items-center mt-[13px]",children:[e.jsx("div",{className:`w-8 h-[2px] ${c.line}`}),e.jsx("div",{className:`w-0 h-0 border-t-[3px] border-t-transparent border-b-[3px] border-b-transparent border-l-[5px] ${c.line==="bg-primary-300"?"border-l-primary-300":"border-l-sky-300"}`})]})]},a)})})})]})};export{$ as default};
