import{u as U,r as l,A as u,j as e,S as E,T as F,D as k}from"./index-4uhfdJ5g.js";import{M}from"./Modal-CMHHpTEA.js";import{u as T,c as I,E as O}from"./ErrorState-DbHSWhVP.js";import{E as B}from"./EmptyState-D_LR6y2O.js";import{F as $}from"./funnel-UUxb9mgp.js";import{B as D,C as L,I as q}from"./info-fYcxlPU-.js";const R={info:{Icon:q,color:"text-sky-500",bg:"bg-sky-50"},success:{Icon:k,color:"text-emerald-500",bg:"bg-emerald-50"},warning:{Icon:F,color:"text-amber-500",bg:"bg-amber-50"},alert:{Icon:L,color:"text-red-500",bg:"bg-red-50"}},K=()=>{const{isLoading:j,isError:y,retry:N}=T(),{toast:w}=U(),[o,v]=l.useState("All"),[S,c]=l.useState(!1),[r,p]=l.useState({target:"All Users",title:"",message:""}),[a,i]=l.useState({}),[n,d]=l.useState({}),f=l.useMemo(()=>o==="All"?u:o==="Unread"?u.filter(t=>t.status==="Unread"):u.filter(t=>t.type==="sent"),[o]),m=u.filter(t=>t.status==="Unread").length,x=(t,s)=>{switch(t){case"title":return s.trim()?"":"Title is required";case"message":return s.trim()?s.trim().length<10?"Message must be at least 10 characters":"":"Message is required";default:return""}},g=t=>{d(s=>({...s,[t]:!0})),i(s=>({...s,[t]:x(t,r[t])}))},b=(t,s)=>{p({...r,[t]:s}),n[t]&&i(h=>({...h,[t]:x(t,s)}))},C=t=>{t.preventDefault();const s={};s.title=x("title",r.title),s.message=x("message",r.message),i(s),d({title:!0,message:!0}),!(s.title||s.message)&&(console.log("Send notification:",r),w("Notification sent!"),c(!1),p({target:"All Users",title:"",message:""}),i({}),d({}))};return j?e.jsx(I,{items:5}):y?e.jsx(O,{onRetry:N}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-primary-900",children:"Notifications"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[m," unread notification",m!==1?"s":""]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:[e.jsx(E,{className:"w-4 h-4"}),"Send Notification"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-slate-400"}),["All","Unread","Sent"].map(t=>e.jsxs("button",{onClick:()=>v(t),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===t?"bg-primary-600 text-white shadow-md shadow-primary-600/20":"bg-white border border-slate-200 text-slate-600 hover:border-primary-300"}`,children:[t,t==="Unread"&&m>0&&e.jsx("span",{className:"ml-1.5 inline-flex items-center justify-center w-5 h-5 rounded-full bg-white/20 text-[11px] font-bold",children:m})]},t))]}),e.jsx("div",{className:"space-y-3",children:f.length===0?e.jsx(B,{icon:e.jsx(D,{className:"w-8 h-8 text-slate-300"}),title:"No notifications to show",subtitle:"All clear — nothing to display right now."}):f.map(t=>{const{Icon:s,color:h,bg:A}=R[t.icon];return e.jsxs("div",{className:`bg-white rounded-2xl border p-4 flex items-start gap-4 transition-all hover:shadow-lg hover:shadow-primary-100/30 ${t.status==="Unread"?"border-primary-200 bg-primary-50/30":"border-slate-200"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${A} flex items-center justify-center shrink-0`,children:e.jsx(s,{className:`w-5 h-5 ${h}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:t.title}),t.status==="Unread"&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary-500 shrink-0"}),t.type==="sent"&&e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-primary-50 text-primary-600 text-[10px] font-bold uppercase tracking-wider",children:"Sent"})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-0.5 line-clamp-2",children:t.message})]}),e.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap shrink-0 mt-0.5",children:t.time})]},t.id)})}),e.jsx(M,{isOpen:S,onClose:()=>{c(!1),i({}),d({})},title:"Send Notification",children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Target Audience"}),e.jsxs("select",{value:r.target,onChange:t=>p({...r,target:t.target.value}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all cursor-pointer",children:[e.jsx("option",{children:"All Users"}),e.jsx("option",{children:"Passengers Only"}),e.jsx("option",{children:"Drivers Only"}),e.jsx("option",{children:"Admins Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Title"}),e.jsx("input",{type:"text",placeholder:"Notification title",value:r.title,onChange:t=>b("title",t.target.value),onBlur:()=>g("title"),className:`w-full px-4 py-2.5 rounded-xl border text-sm focus:ring-2 outline-none transition-all placeholder:text-slate-300 ${n.title&&a.title?"border-red-300 focus:ring-red-500/20 focus:border-red-500":"border-slate-200 focus:ring-primary-500/20 focus:border-primary-500"}`}),n.title&&a.title&&e.jsx("p",{className:"mt-1 text-xs text-red-500 font-medium",children:a.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Message"}),e.jsx("textarea",{placeholder:"Write your notification message…",value:r.message,onChange:t=>b("message",t.target.value),onBlur:()=>g("message"),rows:4,className:`w-full px-4 py-2.5 rounded-xl border text-sm focus:ring-2 outline-none transition-all placeholder:text-slate-300 resize-none ${n.message&&a.message?"border-red-300 focus:ring-red-500/20 focus:border-red-500":"border-slate-200 focus:ring-primary-500/20 focus:border-primary-500"}`}),n.message&&a.message&&e.jsx("p",{className:"mt-1 text-xs text-red-500 font-medium",children:a.message})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-5 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all",children:"Send"})]})]})})]})};export{K as default};
