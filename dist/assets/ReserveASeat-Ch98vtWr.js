import{c as K,u as O,r as n,J as q,K as u,j as e,g as z,E as G,i as T,k as D,U as H,N as A,B,D as Q,O as V}from"./index-B46w0Sko.js";/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],E=K("check",W),X=["Choose Route","Choose Seat","Confirm"],ee=()=>{const{toast:L}=O(),[d,o]=n.useState(1),[x,P]=n.useState(""),[_,N]=n.useState(null),[g]=n.useState(()=>q()),[i,v]=n.useState(null),[b,f]=n.useState(""),[h,y]=n.useState(""),[j,w]=n.useState(!1),[S,c]=n.useState(""),r=u.find(s=>s.id===_),C=n.useMemo(()=>x?u.filter(s=>s.status==="Active"&&s.name.toLowerCase().includes(x.toLowerCase())):u.filter(s=>s.status==="Active"),[x]),M=s=>{N(s);const t=u.find(a=>a.id===s);t&&f(t.departureTimes[0]),o(2)},$=s=>{const t=g.find(a=>a.id===s);t&&t.status==="available"&&(v(s),c(""))},I=()=>{if(!i&&!h){c("Please select a seat and a date to continue.");return}if(!i){c("Please select a seat from the map.");return}if(!h){c("Please pick a date for your trip.");return}c(""),o(3)},Y=()=>{w(!0),L("Seat confirmed! ðŸŽ‰")},U=()=>{o(1),N(null),v(null),f(""),y(""),w(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:e.jsx("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:X.map((s,t)=>{const a=t+1,m=d===a,p=d>a||j;return e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${p?"bg-emerald-500 text-white":m?"bg-primary-600 text-white shadow-lg shadow-primary-600/20":"bg-slate-100 text-slate-400"}`,children:p?e.jsx(E,{className:"w-4 h-4"}):a}),e.jsx("span",{className:`text-sm font-medium hidden sm:block ${m?"text-primary-900":"text-slate-400"}`,children:s})]}),t<2&&e.jsx("div",{className:`flex-1 h-px mx-2 ${d>a?"bg-emerald-300":"bg-slate-200"}`})]},s)})})}),d===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(z,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search routesâ€¦",value:x,onChange:s=>P(s.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300"})]}),e.jsx("div",{className:"grid sm:grid-cols-2 xl:grid-cols-3 gap-4",children:C.map(s=>e.jsxs("button",{onClick:()=>M(s.id),className:"bg-white rounded-2xl border border-slate-200 p-5 text-left hover:shadow-lg hover:shadow-primary-100/30 hover:border-primary-300 transition-all group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900 group-hover:text-primary-700",children:s.name}),e.jsx(G,{className:"w-4 h-4 text-slate-300 group-hover:text-primary-500 transition-colors shrink-0 mt-0.5"})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-slate-400 mb-3 flex-wrap",children:s.stops.map((t,a)=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3 text-primary-400"}),e.jsx("span",{children:t}),a<s.stops.length-1&&e.jsx("span",{className:"text-slate-300 mx-0.5",children:"â†’"})]},t))}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 text-slate-400",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("span",{children:s.departureTimes[0]}),s.departureTimes.length>1&&e.jsxs("span",{className:"text-slate-300",children:["+",s.departureTimes.length-1," more"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"font-semibold text-emerald-600",children:s.availableSeats}),e.jsxs("span",{className:"text-slate-300",children:["/ ",s.totalSeats]})]})]})]},s.id))}),C.length===0&&e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center text-sm text-slate-400",children:"No routes found matching your search."})]}),d===2&&r&&e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>o(1),className:"flex items-center gap-1.5 text-sm font-medium text-slate-500 hover:text-primary-600 transition-colors",children:[e.jsx(A,{className:"w-4 h-4"}),"Back"]}),e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:r.name})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-5 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-md bg-emerald-100 border border-emerald-300"}),e.jsx("span",{className:"text-slate-500",children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-md bg-red-100 border border-red-300"}),e.jsx("span",{className:"text-slate-500",children:"Reserved"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-5 h-5 rounded-md bg-primary-500 border border-primary-600"}),e.jsx("span",{className:"text-slate-500",children:"Your Pick"})]})]}),e.jsx("div",{className:"flex justify-center mb-3",children:e.jsxs("div",{className:"px-4 py-1.5 rounded-t-xl bg-slate-100 border border-b-0 border-slate-200 text-xs font-semibold text-slate-400 uppercase tracking-wider flex items-center gap-1.5",children:[e.jsx(B,{className:"w-3.5 h-3.5"})," Front"]})}),e.jsx("div",{className:"border border-slate-200 rounded-2xl p-4 max-w-xs mx-auto",children:e.jsx("div",{className:"grid grid-cols-[1fr_auto_1fr] gap-y-2",children:Array.from({length:12},(s,t)=>{const a=t+1,m=g.filter(l=>l.row===a),p=m.filter(l=>l.col==="A"||l.col==="B"),F=m.filter(l=>l.col==="C"||l.col==="D"),k=l=>{const J=i===l.id,R=l.status==="reserved";return e.jsx("button",{disabled:R,onClick:()=>$(l.id),className:`w-10 h-10 rounded-lg text-xs font-bold transition-all ${J?"bg-primary-500 text-white border-2 border-primary-600 shadow-md shadow-primary-500/30 scale-105":R?"bg-red-100 text-red-400 border border-red-200 cursor-not-allowed":"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-400 hover:scale-105"}`,children:l.id},l.id)};return e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"flex gap-1.5 justify-end",children:p.map(k)}),e.jsx("div",{className:"w-6"}),e.jsx("div",{className:"flex gap-1.5",children:F.map(k)})]},a)})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 space-y-4",children:[e.jsx("h4",{className:"text-sm font-bold text-primary-900",children:"Trip Details"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Departure Time"}),e.jsx("select",{value:b,onChange:s=>f(s.target.value),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none cursor-pointer",children:r.departureTimes.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Date"}),e.jsx("input",{type:"date",value:h,onChange:s=>{y(s.target.value),c("")},className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5",children:[e.jsx("h4",{className:"text-sm font-bold text-primary-900 mb-3",children:"Your Selection"}),i?e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Seat"}),e.jsx("span",{className:"font-bold text-primary-900",children:i})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Route"}),e.jsx("span",{className:"font-medium text-primary-900",children:r.name.split(" â€” ")[0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Bus"}),e.jsx("span",{className:"font-medium text-primary-900",children:r.assignedBus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Time"}),e.jsx("span",{className:"font-medium text-primary-900",children:b})]})]}):e.jsx("p",{className:"text-sm text-slate-300",children:"Select a seat from the map."}),e.jsx("button",{onClick:I,className:"w-full mt-4 px-5 py-3 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Continue to Confirm"}),S&&e.jsx("p",{className:"mt-2 text-xs text-red-500 font-medium text-center",children:S})]})]})]}),d===3&&r&&!j&&e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[e.jsxs("button",{onClick:()=>o(2),className:"flex items-center gap-1.5 text-sm font-medium text-slate-500 hover:text-primary-600 transition-colors mb-4",children:[e.jsx(A,{className:"w-4 h-4"}),"Back to seat map"]}),e.jsx("h3",{className:"text-lg font-bold text-primary-900 mb-5",children:"Reservation Summary"}),e.jsx("div",{className:"space-y-3 text-sm",children:[{label:"Route",value:r.name,icon:T},{label:"Bus",value:r.assignedBus,icon:B},{label:"Seat",value:i,icon:Q},{label:"Date",value:h,icon:V},{label:"Departure",value:b,icon:D}].map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50",children:[e.jsx(s.icon,{className:"w-4 h-4 text-primary-500 shrink-0"}),e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("span",{className:"text-slate-400",children:s.label}),e.jsx("span",{className:"font-semibold text-primary-900",children:s.value})]})]},s.label))}),e.jsx("button",{onClick:Y,className:"w-full mt-6 px-5 py-3.5 rounded-xl bg-emerald-500 text-white text-sm font-bold hover:bg-emerald-600 shadow-lg shadow-emerald-500/20 transition-all active:scale-[0.98]",children:"Confirm Reservation"})]})}),j&&e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(E,{className:"w-8 h-8 text-emerald-500"})}),e.jsx("h3",{className:"text-xl font-bold text-primary-900 mb-2",children:"Seat Confirmed! ðŸŽ‰"}),e.jsxs("p",{className:"text-sm text-slate-400 mb-6",children:["Your reservation for seat ",e.jsx("span",{className:"font-bold text-primary-900",children:i})," on"," ",e.jsx("span",{className:"font-bold text-primary-900",children:r==null?void 0:r.name})," has been confirmed."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:U,className:"px-6 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 transition-all",children:"Reserve Another"}),e.jsx("button",{className:"px-6 py-2.5 rounded-xl border border-slate-200 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors",children:"Add to Calendar"})]})]})})]})};export{ee as default};
