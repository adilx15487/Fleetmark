import{u as V,F as W,r as l,$ as r,N as X,j as e,k,B as P,H as Z,C as _,a0 as q,a1 as G,X as I,V as N,W as T,I as J}from"./index-BOVp0MNk.js";import{C as K}from"./camera-BMlWuwT5.js";import{S as Q}from"./save-CFkBnjm0.js";import{T as ee}from"./trash-2-DdUjN-2J.js";const re=()=>{const{toast:b}=V(),{isOnboarded:z,transport:i,reservationsUsed:d,maxReservations:m,getBusInfo:B,changeHomeStop:E}=W(),o=B(),[t,x]=l.useState({name:r.name,email:r.email,phone:r.phone,organizationType:r.organizationType,organizationName:r.organizationName}),[f,v]=l.useState({current:"",newPass:"",confirm:""}),[h,F]=l.useState({current:!1,newPass:!1,confirm:!1}),[$,y]=l.useState(!1),[O,g]=l.useState(!1),[w,S]=l.useState(""),[a,C]=l.useState(""),[c,p]=l.useState(null),[D,j]=l.useState("select"),H=X.filter(s=>s.toLowerCase().includes(w.toLowerCase())),M=()=>{S(""),C(""),p(null),j("select"),g(!0)},A=s=>{if(C(s),N(s))p(null);else{const u=T(s);u.length>0&&p(u[0])}},L=()=>{!a||!c||(E(a,c),g(!1),b("Home stop updated! Your bus has been reassigned."))},R=s=>{s.preventDefault(),b("Profile updated successfully!"),y(!0),setTimeout(()=>y(!1),2e3)},U=s=>{s.preventDefault(),b("Password updated successfully!"),v({current:"",newPass:"",confirm:""})},n="w-full px-4 py-2.5 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all placeholder:text-slate-300";return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-20 h-20 rounded-full bg-slate-200"}),e.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 rounded-full bg-primary-600 text-white flex items-center justify-center border-2 border-white shadow-lg hover:bg-primary-700 transition-colors",children:e.jsx(K,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-primary-900",children:r.name}),e.jsx("p",{className:"text-sm text-slate-400",children:r.email}),e.jsx("span",{className:"inline-block mt-1.5 px-2.5 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider bg-emerald-50 text-emerald-600 border border-emerald-200",children:"Passenger"})]})]})}),z&&i&&e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Transport Settings"}),e.jsx("span",{className:"text-xs text-slate-400",children:"1337 Night Shuttle"})]}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Home Stop"})]}),e.jsx("p",{className:"text-sm font-bold text-primary-900",children:i.homeStop}),e.jsx("button",{onClick:M,className:"mt-2 text-xs font-semibold text-accent-500 hover:text-accent-600 transition-colors",children:"Change →"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"w-4 h-4 text-sky-500"}),e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Assigned Bus"})]}),e.jsx("p",{className:"text-sm font-bold text-primary-900",children:(o==null?void 0:o.busNumber)||"—"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:(o==null?void 0:o.routeName)||""})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Tonight"})]}),e.jsxs("p",{className:"text-sm font-bold text-primary-900",children:[d," / ",m," trips"]}),e.jsx("div",{className:"w-full h-1.5 rounded-full bg-slate-200 mt-2",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all ${d>=m?"bg-red-500":d>=m-1?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${d/m*100}%`}})})]})]})]}),e.jsxs("form",{onSubmit:R,className:"bg-white rounded-2xl border border-slate-200 p-6 space-y-5",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Personal Information"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Full Name"}),e.jsx("input",{type:"text",value:t.name,onChange:s=>x({...t,name:s.target.value}),className:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Email"}),e.jsx("input",{type:"email",value:t.email,disabled:!0,className:`${n} bg-slate-50 text-slate-400 cursor-not-allowed`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Phone Number"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>x({...t,phone:s.target.value}),placeholder:"+212 6 00 00 00 00",className:n})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Organization Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t.organizationType,onChange:s=>x({...t,organizationType:s.target.value}),className:`${n} appearance-none cursor-pointer bg-white`,children:[e.jsx("option",{value:"University",children:"University"}),e.jsx("option",{value:"Enterprise",children:"Enterprise"}),e.jsx("option",{value:"School",children:"School"})]}),e.jsx(_,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Organization Name"}),e.jsx("input",{type:"text",value:t.organizationName,onChange:s=>x({...t,organizationName:s.target.value}),className:n})]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-6 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:[e.jsx(Q,{className:"w-4 h-4"}),$?"Saved!":"Save Changes"]})})]}),e.jsxs("form",{onSubmit:U,className:"bg-white rounded-2xl border border-slate-200 p-6 space-y-5",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Change Password"}),["current","newPass","confirm"].map(s=>{const u={current:"Current Password",newPass:"New Password",confirm:"Confirm New Password"};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:u[s]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h[s]?"text":"password",value:f[s],onChange:Y=>v({...f,[s]:Y.target.value}),placeholder:"••••••••",className:n}),e.jsx("button",{type:"button",onClick:()=>F({...h,[s]:!h[s]}),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:h[s]?e.jsx(q,{className:"w-4 h-4"}):e.jsx(G,{className:"w-4 h-4"})})]})]},s)}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all active:scale-[0.98]",children:"Update Password"})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-red-200 p-6",children:[e.jsx("h3",{className:"text-sm font-bold text-red-600 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Once you delete your account, all of your data — including reservations, ride history, and profile — will be permanently removed. This action cannot be undone."}),e.jsxs("button",{className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-red-500 text-white text-sm font-semibold hover:bg-red-600 shadow-lg shadow-red-500/20 transition-all active:scale-[0.98]",children:[e.jsx(ee,{className:"w-4 h-4"}),"Delete My Account"]})]}),O&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100",children:[e.jsx("h3",{className:"text-sm font-bold text-primary-900",children:"Change Home Stop"}),e.jsx("button",{onClick:()=>g(!1),className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors",children:e.jsx(I,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:D==="select"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Changing your stop may reassign your bus. Your active reservations for tonight will remain valid."}),e.jsx("input",{type:"text",placeholder:"Search stops...",value:w,onChange:s=>S(s.target.value),className:n,autoFocus:!0}),e.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:H.map(s=>e.jsx("button",{onClick:()=>A(s),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm transition-colors ${a===s?"bg-primary-50 text-primary-700 font-semibold":"hover:bg-slate-50 text-slate-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s}),N(s)&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-50 text-amber-600 font-medium",children:"Both routes"})]})},s))}),a&&N(a)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"This stop is served by both buses. Pick one:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:T(a).map(s=>e.jsx("button",{onClick:()=>p(s),className:`p-3 rounded-xl border text-center text-sm font-semibold transition-all ${c===s?"border-primary-500 bg-primary-50 text-primary-700":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:s},s))})]}),a&&c&&e.jsxs("button",{onClick:()=>j("confirm"),className:"w-full py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 transition-colors",children:["Continue",e.jsx(J,{className:"w-4 h-4 inline ml-1"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-amber-800 font-semibold mb-1",children:"⚠️ Confirm Change"}),e.jsxs("p",{className:"text-xs text-amber-600",children:["Your home stop will change from"," ",e.jsx("strong",{children:i==null?void 0:i.homeStop})," to"," ",e.jsx("strong",{children:a}),". Your bus assignment may also change."]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(k,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"text-slate-500",children:"New Stop:"}),e.jsx("span",{className:"font-bold text-primary-900",children:a})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(P,{className:"w-4 h-4 text-sky-500"}),e.jsx("span",{className:"text-slate-500",children:"New Bus:"}),e.jsx("span",{className:"font-bold text-primary-900",children:c})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>j("select"),className:"flex-1 py-2.5 rounded-xl border border-slate-200 text-sm font-semibold text-slate-600 hover:bg-slate-50 transition-colors",children:"Back"}),e.jsx("button",{onClick:L,className:"flex-1 py-2.5 rounded-xl bg-primary-600 text-white text-sm font-semibold hover:bg-primary-700 transition-colors",children:"Confirm Change"})]})]})})]})})]})};export{re as default};
